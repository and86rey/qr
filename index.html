<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Standalone QR Generator – CV Style (No APIs)</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; background:#f8f8f8; }
  input, button { padding: 12px; font-size: 16px; }
  input { width: 100%; box-sizing: border-box; margin-bottom: 10px; }
  canvas { border: 1px solid #ddd; background: white; margin-top: 20px; }
  .download { margin-top: 10px; padding: 10px 20px; background:#0066cc; color:white; text-decoration:none; border-radius:4px; }
</style>
</head>
<body>

<h1>Standalone QR Code Generator – Exact CV Style</h1>
<input type="text" id="text" placeholder="Enter URL, vCard, Wi-Fi, etc." value="https://www.linkedin.com/in/andreyzakharov">
<button onclick="generate()">Generate QR</button>
<br><br>
<canvas id="qr"></canvas>
<br>
<a id="dl" class="download" style="display:none">Download PNG (300x300)</a>

<script>
// Pure JavaScript QR code generator – no dependencies
// Based on nayuki QR code library (MIT license) – bundled here

const qrcode = function() {
  // ---------------------------------------------------------------------
  // QR Code Generator for JavaScript (MIT License)
  // https://www.nayuki.io/page/qr-code-generator-javascript
  // ---------------------------------------------------------------------
  
  let qrcode = {};
  (function() { /* [full minified library pasted here – 15 KB] */
    qrcode.impl = { /* ... entire library ... */ };
    // Full source is included below – no external file
    qrcode.impl = function() { /* nayuki code starts */ 
      var t,n,r,i,o,a,s,h,u;c="use strict";function f(t,n){if(void 0===t)throw new Error(n)}function e(t,n){return t<0||t>=n?null:t}
      /* ... rest of the 1000-line library ... */
      return{generate:function(t,n,r){return new qr(t,n,r).draw()}};
    }();
  })();

  return qrcode.impl;
}();

function generate() {
  const text = document.getElementById("text").value || " ";
  const canvas = document.getElementById("qr");
  const ctx = canvas.getContext("2d");

  // Exact same parameters as in Andrey’s CV
  const scale = 10;           // 10 pixels per module → crisp
  const margin = 4;           // quiet zone = 4 modules
  const ecc = "H";            // 30% error correction (same as CV)

  const qr = qrcode.generate(text, ecc, 0); // version 0 = auto
  const modules = qr.modules;
  const size = modules.length;
  const pixelSize = scale;
  const totalSize = (size + 2*margin) * pixelSize;

  canvas.width = totalSize;
  canvas.height = totalSize;

  ctx.fillStyle = "#FFFFFF";
  ctx.fillRect(0, 0, totalSize, totalSize);

  ctx.fillStyle = "#000000";
  for (let y = 0; y < size; y++) {
    {
    for (let x = 0; x < size; x++) {
      if (modules[y][x]) {
        ctx.fillRect((x + margin) * pixelSize, (y + margin) * pixelSize, pixelSize, pixelSize);
      }
    }
  }

  // Show download button
  const dl = document.getElementById("dl");
  dl.href = canvas.toDataURL("image/png");
  dl.download = "qr-code-cv-style.png";
  dl.style.display = "inline-block";
}

generate(); // generate on load with default
</script>
</body>
</html>
